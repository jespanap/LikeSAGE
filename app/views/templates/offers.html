{% extends "base.html" %}

{% block title %}Ofertas disponibles{% endblock %}

{% block content %}
<h1>Estas son las ofertas</h1>
<div id="offers">
    <ul>
        {% for v in vacancy %}
            <li>
                <strong><a href="/offers/{{ v.titulo | urlencode }}">{{ v.titulo }}</a></strong><br>
                Empresa: {{ v.empresa }}<br>
                Ciudad: {{ v.ciudad }}<br>
                Nivel educativo: {{ v.nivel_educativo }}<br>
                Nivel de experiencia: {{ v.nivel_experiencia }}<br>
                Habilidades requeridas:
                <ul>
                    {% for h in v.habilidades %}
                        <li>{{ h }}</li>
                    {% endfor %}
                </ul>

                {% if user %}
                    <form method="post" action="/offers/interact">
                        <input type="hidden" name="page" value="{{ page }}">
                        <input type="hidden" name="titulo" value="{{ v.titulo }}">
                        <input type="hidden" name="accion" value="like">
                        <button type="submit">üëç Like</button>
                    </form>
                    
                    <form method="post" action="/offers/interact">
                        <input type="hidden" name="page" value="{{ page }}">
                        <input type="hidden" name="titulo" value="{{ v.titulo }}">
                        <input type="hidden" name="accion" value="save">
                        <button type="submit">‚≠ê Guardar</button>
                    </form>
                    
                    <form method="post" action="/offers/share">
                        <input type="hidden" name="page" value="{{ page }}">
                        <input type="hidden" name="vacancy_title" value="{{ v.titulo }}">
                        <button type="submit">üì§ Compartir</button>
                    </form>
                {% else %}
                    <p>Inicia sesi√≥n para interactuar con las ofertas.</p>
                    <form action="/login">
                        <button>Iniciar sesi√≥n</button>
                    </form>
                    <form action="/register">
                        <button>Registrarse</button>
                    </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <!-- Aqu√≠ va la paginaci√≥n, fuera del <ul> -->
    <div class="pagination">
        {% if page > 1 %}
            <a href="/offers?page={{ page - 1 }}">‚¨ÖÔ∏è Anterior</a>
        {% endif %}

        <span>P√°gina {{ page }} de {{ total_pages }}</span>

        {% if page < total_pages %}
            <a href="/offers?page={{ page + 1 }}">Siguiente ‚û°Ô∏è</a>
        {% endif %}
    </div>
</div>
{% endblock %}
